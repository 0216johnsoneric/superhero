#!/usr/bin/env ruby

require_relative "environment"


class CLI
    
    def call
        puts "Welcome to the Super_Scraper ruby gem!"
        self.input_selector
    end
    
    def input_selector
        puts "How would you like to input a Superhero or Villain? (\"enter a name\", \"by studio\", or \"random list\")"
        choice = gets.strip.downcase
        while !["enter a name", "by studio", "random list"].include?(choice)
            puts "oops lets try that again. (\"enter a name\", \"by studio\", or \"random list\")"
            choice = gets.strip.downcase
        end
        if choice == "enter a name"
            self.input_enter
        elsif choice == "by studio"
            self.input_studio
        elsif choice == "random list"
            self.input_random
        end
    end
    
    def input_enter
        puts "please enter the name of the Superhero:"
        hero = gets.strip
        a = Super.new(hero)
        while a.name == false
            puts "I'm sorry I am unable to find infoermation on that hero, let's try another:"
            hero = gets.strip
            a = Super.new(hero)
        end
        puts a.gen_info
    end
    
    def input_studio
        puts "thank you for selecting, by studio.  Please chose either \"DC\" or \"Marvel\""
        stud = gets.strip.downcase
        while !["dc", "marvel"].include?(stud)
            puts "oops lets try again. Please chose either \"DC\" or \"Marvel\""
            stud = gets.strip.downcase
        end
        if stud == "dc"
            a = Super::dc_list
        elsif stud == "marvel"
            a = Super::m_list
        end
        display_studio(a)
    end
    
    def display_studio(stud_array)
        dis_array = stud_array.each_slice(10).to_a
        i = 0
        while i < dis_array.length
            puts dis_array[i]
            puts "displaying  [#{i + 1} // #{dis_array.length + 1}]  pages"
            puts "please enter a heroes name, \"next\" for next page of heroes, or \"exit\" to exit the program and be offered a new search"
            input = gets.strip.downcase
            while ![ "next", "exit"].include?(input) && Super.new(input).name == false
                puts "I'm sorry either your hero selection was invalid or I didnt understand your request"
                puts "please enter a heroes name, \"next\" for next page of heroes, or \"exit\" to exit the the current seach and be offered a new search"
                input = gets.strip.downcase
            end
            if input == "exit"
                break
            elsif Super.new(input).name != false
                puts Super.new(input).gen_info
                break
            end
            i += 1
        end
    end
    
    def input_random
        a = Super::m_list
        b = Super::dc_list
        c = a.concat(b)
        c.shuffle!
        puts "thank you for chosing the random list input method, here are a list of heroes to chose from, simply enter the Hero's name:"
        display_studio(a)
    end
        
        
end

CLI.new.call